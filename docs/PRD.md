# 📝 PRD：家庭壁挂日历 MVP

## 1. 产品背景与目标
- **背景**  
  多子女家庭每天要协调学校活动、课后班、家庭事件和接送安排。现有日历工具复杂，不适合壁挂展示；现有硬件方案（Skylight/Cozyla）贵、功能固定。  
- **目标**  
  打造一款专为家庭设计的 **壁挂日历**，核心是「孩子分轨 + 接送清晰 + 壁挂常显」，并为未来对接外部日历（Google/Outlook）和扩展视图（如月视图）留接口。

---

## 2. 用户画像
- **家长用户**：30–45 岁，有 1–3 个孩子，经常需要协调接送和家庭活动。  
- **孩子用户**（次要）：6–14 岁；主要查看自己的活动（MVP 阶段只读）。  

---

## 3. 使用场景
1. 早晨出门前 glance at wall → 今天谁接送、几点出发。  
2. 放学后孩子看到今天的课后班。  
3. 周末提前看到 PTA/Party/旅行安排。  
4. 家长后台录入/修改 → 壁挂屏自动刷新。  

---

## 4. 功能范围

### 4.1 MVP 必要功能（周视图）
- **展示**  
  - 周历视图（Mon–Sun，08:00–22:00，必要时自动扩展）。  
  - 按孩子分轨（每个孩子独立行、不同颜色）。  
  - 支持家庭事件（不分孩子）。  
  - 顶部按钮「今天 / 上周 / 下周」切换。  

- **输入 & 管理**  
  - 统一事件添加接口（API 或后台表单）。  
  - 支持 CSV/ICS 导入。  
  - 字段：标题、开始/结束时间、地点、孩子、类别、重复规则（RRULE）、例外日（EXDATE）。  

- **同步**  
  - 数据写入本地数据库；  
  - 壁挂端 ≤10 秒内刷新（SSE 或轮询）。  

- **壁挂模式**  
  - 全屏、常亮、大字号（2–3 米远可读）。  
  - 横屏优先，竖屏回退单日纵向视图。  

### 4.2 非 MVP（未来迭代）
- 月视图（7×5/6 网格，点击跳周视图）。  
- 孩子交互（添加/打卡/奖励）。  
- 接送管理（事件绑定接送人，出发提醒）。  
- 拼车轮值/冲突检测。  
- Google/Outlook 双向同步。  
- 学校/培训班日历订阅。  

---

## 5. 用户流程（MVP）
1. 家长通过后台表单/CSV/ICS 上传事件。  
2. 系统存储（支持 RRULE/EXDATE）。  
3. 壁挂端调用 API 获取窗口数据，展开实例化事件。  
4. 家长/孩子通过壁挂屏查看安排。  

---

## 6. 数据模型（简化）
**Kid**  
- id, name, color, avatar  

**Event**  
- id, title, location, startUtc, endUtc  
- rrule (FREQ=WEEKLY;BYDAY=TU)  
- exdates ([2025-10-01])  
- kidIds ([kid-ming])  
- category (school/after-school/family)  
- source (manual/ics/google/outlook)  
- createdBy, updatedAt  

---

## 7. 非功能性要求
- 性能：事件渲染 <1s；刷新延迟 ≤10s。  
- 可用性：字体 clamp(14px, 2vw, 24px)，2–3 米远可读。  
- 兼容性：iPad Safari / Android Chrome 全屏运行。  
- 扩展性：事件添加接口独立，未来扩展月视图 & 外部日历。  

---

## 8. 验收标准
- 家长后台/导入事件 → 壁挂端正确显示。  
- 周末、早晚 PTA 活动正常展示。  
- 断网时显示缓存，联网后自动更新。  
- 2–3 米外用户可清晰辨认。  

---

## 9. 风险与假设
- **假设**：家庭已有 iPad/Android 平板可壁挂。  
- **风险**：无外部日历时需重复录入 → CSV/ICS 缓解。  
- **风险**：壁挂屏常亮耗电/寿命 → 需低亮度+外接电源。  
